<!--

  Field definitions appearing in composite form need to be added to mp-field-visualization in default template

-->

<mp-field-visualization
  subject="[[this]]"
  fields="[[fieldDefinitions field=field]]"
  template="{{> default}}"
>
  <template id="default">
      <dl>
      {{#each fields as |field|}}
        {{#if field.values}}
          <dt>
            {{#each field.label as |l|}}
              {{ l.value }}
            {{/each}}
          </dt>
          {{#each field.values as |value|}}
            <dd>
              <mp-field-visualization
                subject="{{value.value.value}}"
                fields="[[fieldDefinitions 
                  descriptionOfEducationalGoal='http://www.metaphacts.com/fieldDefinition/descriptionOfEducationalGoal'
                  descriptionOfNarration='http://www.metaphacts.com/fieldDefinition/descriptionOfNarration'
                  descriptionOfUserNeeds='http://www.metaphacts.com/fieldDefinition/descriptionOfUserNeeds'
                  hasEducationFormat='http://www.metaphacts.com/fieldDefinition/hasEducationFormat'
                  hasSubject='http://www.metaphacts.com/fieldDefinition/hasSubject'               
                  hasTargetAudience='http://www.metaphacts.com/fieldDefinition/hasTargetAudience'
                  url='http://www.metaphacts.com/fieldDefinition/url'
                ]]"
                template="<bs-panel>{{> :fieldVisualisationTemplate}}</bs-panel>"
              >
            </dd>
          {{/each}}
        {{/if}}
        {{/each}}
      </dl>
  </template>
</mp-field-visualization>

